/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2016 SAP SE. All rights reserved
 */
sap.ui.define(['sap/ui/base/ManagedObject','sap/ui/rta/controlAnalyzer/ControlAnalyzerFactory','sap/ui/fl/registry/ChangeRegistry'],function(M,C,a){"use strict";var c=function(e,o,s){var A=C.getControlAnalyzerFor(e);var d=A.getConfiguredElement(e);var h=d.getMetadata().getName();var i=A.getFlexChangeType(o.getName(),e,s);if(i){var r=a.getInstance().getRegistryItems({controlType:h,changeTypeName:i});if(r&&r[h]&&r[h][i]){var R=r[h][i];var j=R.getChangeTypeMetadata().getChangeHandler();o.setChangeHandler(j);o.setChangeType(i);if(e!==d&&o.setOriginalElement){var S=A._getStableElementForCommand(e);o.setOriginalElement(S);}}else{jQuery.sap.log.warning("No '"+i+"' change handler for "+h+" registered");}}else{jQuery.sap.log.warning("No "+o.getName()+" change type registered for "+h);}if(o.prepareChange){o.prepareChange();}return o;};var f=function(e,s){var A=C.getControlAnalyzerFor(e);return A.getCommandClass(s);};var g=function(e){var A=C.getControlAnalyzerFor(e);return A.getConfiguredElement(e);};var m={"Hide":{findClass:f,configure:c},"Unhide":{findClass:f,configure:c},"Stash":{clazz:'sap.ui.rta.command.Stash'},"Unstash":{clazz:'sap.ui.rta.command.Unstash'},"Ungroup":{clazz:'sap.ui.rta.command.Ungroup'},"Group":{clazz:'sap.ui.rta.command.Group'},"Move":{findClass:f,configure:c},"Add":{findClass:f,configure:c},"Composite":{clazz:'sap.ui.rta.command.CompositeCommand'},"Rename":{findClass:f,configure:c},"Property":{clazz:'sap.ui.rta.command.Property'},"BindProperty":{clazz:'sap.ui.rta.command.BindProperty'}};var b=M.extend("sap.ui.rta.command.CommandFactory",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});b.getCommandFor=function(e,s,S){var d=m[s];var h;if(d.findClass){h=d.findClass(e,s);}else{h=d.clazz;}jQuery.sap.require(h);var i=jQuery.sap.getObject(h);var o=g(e,S);S=jQuery.extend(S,{element:o,name:s});var j=new i(S);if(d.configure){d.configure(e,j,S);}return j;};return b;},true);
